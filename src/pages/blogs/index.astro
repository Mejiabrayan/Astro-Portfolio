---
import Layout from '@/components/Layout.astro';
import { contentfulClient } from '../../lib/contentful';
import type { BlogPost } from '../../lib/contentful';
import '../../styles/globals.css';

// Astro components can fetch data from your Contentful account by using the contentfulClient and specifying the content_type.
const entries = await contentfulClient.getEntries<BlogPost>({
  content_type: 'blogPost',
});

const posts = entries.items.map((item) => {
  const { title, date, description, slug } = item.fields;
  return {
    title,
    slug,
    description,
    date: new Date(date).toLocaleDateString(),
  };
});
---

<html lang='en'>
  <head>
    <title>My Blog</title>
  </head>
  <Layout title='Brayan M. Cuenca Portfolio'>
    <body class='bg-background text-foreground'>
      <h1 class='text-4xl font-geist-bold text-center py-8 text-white'>My Blog</h1>
      <div class='container mx-auto px-4 md:px-8 lg:px-16 xl:px-32 2xl:px-36'>
        {
          posts.map((post) => (
            <div class='border border-gray-300 rounded-md p-4 hover:shadow-lg my-4'>
              <a
                href={`/blogs/${post.slug}/`}
                class='text-2xl font-geist-medium hover:underline'
              >
                <h2 class="text-white">{post.title}</h2>
              </a>
              <time class='text-gray-500'>{post.date}</time>
              <p class='mt-2'>{post.description}</p>
            </div>
          ))
        }
      </div>
    </body>
  </Layout>


</html>
